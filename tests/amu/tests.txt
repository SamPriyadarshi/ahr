


# Tests for kvmaps

https://apidocs.apigee.com/docs/key-value-maps/1/overview


MAPI=http://10.128.0.22:8080

MAPI=http://10.154.0.4:8080

ORG=org
ENV=dev

API=ping
REV=1


# kvm list
curl -n $MAPI/v1/organizations/$ORG/environments/$ENV/keyvaluemaps

# org

curl -n $MAPI/v1/organizations/$ORG/keyvaluemaps -H "content-type: application/json" -d @- <<EOF
{
  "encrypted": true,
  "entry": [
    {
      "name": "keyname",
      "value": "keyvalue"
    },
    {
      "name": "keyname2",
      "value": "keyvalue2"
    }
  ],
  "name": "kvmorg"
}
EOF

# scope: env, no encrypt
curl -n $MAPI/v1/organizations/$ORG/environments/$ENV/keyvaluemaps -H "content-type: application/json" -d @- <<EOF
{
  "entry": [
    {
      "name": "keyname",
      "value": "keyvalue"
    },
    {
      "name": "keyname2",
      "value": "keyvalue2"
    }
  ],
  "name": "kvmorgenvnoencdef"
}
EOF

# get 
curl -n $MAPI/v1/organizations/$ORG/environments/$ENV/keyvaluemaps/kvmorgenvnoencdef


# scope: proxy
https://api.enterprise.apigee.com/v1/organizations/{org_name}/apis/{api_name}/keyvaluemaps

curl -n $MAPI/v1/organizations/$ORG/apis/$API/keyvaluemaps  -H "content-type: application/json" -d @- <<EOF
{
  "encrypted": true,
  "entry": [
    {
      "name": "keyname",
      "value": "keyvalue"
    },
    {
      "name": "keyname2",
      "value": "keyvalue2"
    }
  ],
  "name": "kvmproxy"
}
EOF

# get
curl -n $MAPI/v1/organizations/$ORG/apis/$API/keyvaluemaps 


# scope: to an API proxy revision.
https://api.enterprise.apigee.com/v1/organizations/{org_name}/apis/{api_name}/revisions/{revision_number}/keyvaluemaps

curl -n $MAPI/v1/organizations/$ORG/apis/$API/revisions/1/keyvaluemaps  -H "content-type: application/json" -d @- <<EOF
{
  "encrypted": true,
  "entry": [
    {
      "name": "keyname",
      "value": "keyvalue"
    },
    {
      "name": "keyname2",
      "value": "keyvalue2"
    }
  ],
  "name": "kvmprev"
}
EOF